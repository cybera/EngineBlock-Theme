// This file is generated. Please edit the files of the appropriate theme in the 'theme/' directory.
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){if(document.body.className=document.body.className.replace("no-js",""),null!==document.getElementById("engine-main-page"))return void(0,f.replaceMetadataCertificateLinkTexts)();if(null!==document.getElementById("wayf-configuration")){var a=document.querySelector("#selection"),b=document.querySelector("#preselection"),c=document.querySelector(".mod-search-input"),d=document.getElementById("idp-picker"),n=document.querySelector("form.mod-search"),o=document.querySelector("a.noaccess"),p=document.getElementById("request-access"),q=document.getElementById("request-access-scroller"),r=JSON.parse(document.getElementById("wayf-configuration").innerHTML),s=new l.IdpListElementFactory(r.messages),t=new g.IdpList(a,r.idpList,s,r.cutoffPointForShowingUnfilteredIdps),u=new i.PreviousSelectionList(b,r.previousSelectionList,s),v=new k.PreviousSelectionStorage(r.previousSelectionCookieName),w=new h.IdpPicker(n,d,u,t,v),x=new m.RequestAccessModalHelper(p,q,c,r.requestAccessUrl),y=new j.KeyboardListener(w,c,x);c.addEventListener("keyup",e(function(a){return w.searchBy(a.target.value)},250)),c.addEventListener("click",function(a){return w.searchBy(a.target.value)}),c.addEventListener("input",function(a){return w.searchBy(a.target.value)}),document.addEventListener("keyup",function(a){return y.handle(a.keyCode)}),n.addEventListener("submit",function(a){a.preventDefault(),w.selectIdpUnderFocus()}),null!==o&&o.addEventListener("click",function(a){return x.openRequestAccessModal()}),window.innerWidth>800&&c.focus()}}function e(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){return a.apply(d,e)},b)}}var f=a("./modules/EngineBlockMainPage"),g=a("./modules/IdpList"),h=a("./modules/IdpPicker"),i=a("./modules/PreviousSelectionList"),j=a("./modules/KeyboardListener"),k=a("./modules/PreviousSelectionStorage"),l=a("./modules/IdpListElementFactory"),m=a("./modules/RequestAccessModalHelper");d()},{"./modules/EngineBlockMainPage":2,"./modules/IdpList":4,"./modules/IdpListElementFactory":5,"./modules/IdpPicker":6,"./modules/KeyboardListener":7,"./modules/PreviousSelectionList":8,"./modules/PreviousSelectionStorage":9,"./modules/RequestAccessModalHelper":10}],2:[function(a,b,c){"use strict";function d(){for(var a=document.querySelectorAll("dl.metadata-certificates-list a"),b=0;b<a.length;b++){var c=a[b];"true"!==c.getAttribute("data-external-link")&&(c.textContent=window.location.protocol+"//"+window.location.hostname+c.getAttribute("href"))}}c.__esModule=!0,c.replaceMetadataCertificateLinkTexts=d},{}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;c.IdpFilter=function(){function a(){d(this,a)}return a.filterIdpsByValue=function(a,b){return a.filter(function(a){return a.title.indexOf(b)>-1||a.entityId.indexOf(b)>-1||a.keywords.indexOf(b)>-1})},a}()},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0,c.IdpList=void 0;var e=a("./IdpFilter");c.IdpList=function(){function a(b,c,e,f){d(this,a),this.targetElement=b,this.idpList=c,this.idpListElementFactory=e,this.filterValue="",this.shouldHideUnfilteredIdpList=this.idpList.length>f,this.filteredIdpList=this.idpList,this.render()}return a.prototype.filterBy=function(a){this.filterValue=a,this.filteredIdpList=e.IdpFilter.filterIdpsByValue(this.idpList,a),this.render()},a.prototype.narrowFilterBy=function(a){this.filterValue=a,this.filteredIdpList=e.IdpFilter.filterIdpsByValue(this.filteredIdpList,a),this.render()},a.prototype.getFilteredIdpByIndex=function(a){return this.filteredIdpList[a]},a.prototype.addIdp=function(a){this.idpList.push(a),this.sortIdpListAlphabetically(),this.filteredIdpList=this.idpList,this.render()},a.prototype.render=function(){var a=this.targetElement.querySelector(".noresults");if(0===this.filteredIdpList.length?a.className=a.className.replace(" hidden",""):-1===a.className.indexOf("hidden")&&(a.className+=" hidden"),""===this.filterValue.trim()&&this.shouldHideUnfilteredIdpList){this.targetElement.className+=" hidden";var b=this.idpListElementFactory.createIdpListElementWithSelectionButtons([]);return void this.targetElement.replaceChild(b,this.targetElement.querySelector(".idp-list"))}this.targetElement.className=this.targetElement.className.replace(" hidden","");var c=this.idpListElementFactory.createIdpListElementWithSelectionButtons(this.filteredIdpList);this.targetElement.replaceChild(c,this.targetElement.querySelector(".idp-list"))},a.prototype.sortIdpListAlphabetically=function(){this.idpList=this.idpList.sort(function(a,b){return a.title<b.title?-1:a.title>b.title?1:0})},a}()},{"./IdpFilter":3}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){if(!0===g[a])return void c.setAttribute("src",b);var d=function d(){c.removeEventListener("error",d),c.setAttribute("src",b),g[a]=!0};c.addEventListener("error",d),c.setAttribute("src",a)}c.__esModule=!0;var f="/images/placeholder.png",g=(c.IdpListElementFactory=function(){function a(b){d(this,a),this.messages=b}return a.prototype.createIdpListElementWithSelectionButtons=function(a){var b=document.createElement("div");b.className="idp-list";for(var c=0;c<a.length;c++){var d=document.createElement("a");d.className="result active access",d.setAttribute("href","#"),d.setAttribute("tabindex","-1");var g=document.createElement("img");g.className="logo",e(a[c].logo,f,g);var h=document.createElement("h3");h.textContent=a[c].displayTitle;var i=document.createElement("span");i.className="c-button white action",i.textContent=this.messages.pressEnterToSelect,d.appendChild(g),d.appendChild(h),d.appendChild(i),b.appendChild(d)}return b},a.prototype.createIdpListElementWithDeleteButtons=function(a){var b=document.createElement("div");b.className="idp-list show-buttons";for(var c=0;c<a.length;c++){var d=document.createElement("a");d.className="result active access",d.setAttribute("href","#"),d.setAttribute("tabindex","-1");var g=document.createElement("img");g.className="logo",g.setAttribute("alt",""),e(a[c].logo,f,g);var h=document.createElement("h3");h.textContent=a[c].displayTitle;var i=document.createElement("span");i.className="c-button action outline deleteable img";var j=document.createElement("img");j.className="deleteable",j.setAttribute("src","/images/cross.svg"),j.setAttribute("alt","delete"),i.appendChild(j),d.appendChild(g),d.appendChild(h),d.appendChild(i),b.appendChild(d)}return b},a}(),{})},{}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;c.IdpPicker=function(){function a(b,c,e,f,g){d(this,a),this.searchForm=b,this.targetElement=c,this.previousSelectionList=e,this.idpList=f,this.previousSelectionStorage=g,this.previousSearchTerm="",this.indexOfIdpUnderFocus=null,this.focusOnFirstIdp(),this.indexElements(),this.updateResultSelectedClickListeners(),this.updateEditPreviousSelectionClickListener()}return a.prototype.searchBy=function(a){(a=a.trim().toLowerCase())!==this.previousSearchTerm&&(a.length>this.previousSearchTerm.length?(this.previousSelectionList.narrowFilterBy(a),this.idpList.narrowFilterBy(a)):(this.previousSelectionList.filterBy(a),this.idpList.filterBy(a)),this.focusOnFirstIdp(),this.indexElements(),this.updateResultSelectedClickListeners(),this.updateEditPreviousSelectionClickListener(),this.previousSearchTerm=a)},a.prototype.indexElements=function(){for(var a=this.targetElement.querySelectorAll(".result"),b=0;b<a.length;b++)a[b].setAttribute("data-idp-list-index",b)},a.prototype.focusOnFirstIdp=function(){this.focusOnIdpByIndex(0)},a.prototype.focusOnIdpByIndex=function(a){var b=this.targetElement.querySelectorAll(".result");if(0!==b.length&&!(a>=b.length||b[a].className.indexOf("focussed")>-1)){for(var c=this.targetElement.querySelectorAll(".result.focussed"),d=0;d<c.length;d++)c[d].className=c[d].className.replace(" focussed","");b[a].className+=" focussed",this.indexOfIdpUnderFocus=a}},a.prototype.focusOnPreviousIdp=function(){0!==this.indexOfIdpUnderFocus&&this.focusOnIdpByIndex(this.indexOfIdpUnderFocus-1)},a.prototype.focusOnNextIdp=function(){this.focusOnIdpByIndex(this.indexOfIdpUnderFocus+1)},a.prototype.isFocusOnFirstIdp=function(){return 0===this.indexOfIdpUnderFocus},a.prototype.updateResultSelectedClickListeners=function(){for(var a=this.targetElement.querySelectorAll(".result"),b=0;b<a.length;b++)a[b].removeEventListener("click",this.resultSelectedClickHandler()),a[b].addEventListener("click",this.resultSelectedClickHandler())},a.prototype.resultSelectedClickHandler=function(){var a=this;return function(b){b.target.className.indexOf("deleteable")>-1||(b.preventDefault(),a.focusOnIdpByIndex(b.currentTarget.getAttribute("data-idp-list-index")),a.selectIdpUnderFocus())}},a.prototype.updateEditPreviousSelectionClickListener=function(){var a=this.targetElement.querySelector(".edit");a.removeEventListener("click",this.editPreviousSelectionClickHandler()),a.addEventListener("click",this.editPreviousSelectionClickHandler())},a.prototype.editPreviousSelectionClickHandler=function(){var a=this;return function(b){b.preventDefault();var c=a.targetElement.querySelector("#preselection .idp-list");c.className.indexOf("show-buttons")>-1?c.className=c.className.replace("show-buttons",""):c.className+=" show-buttons";var d=b.currentTarget.getAttribute("data-toggle-text");b.currentTarget.setAttribute("data-toggle-text",b.currentTarget.textContent),b.currentTarget.textContent=d,a.previousSelectionList.editing=!a.previousSelectionList.editing,a.previousSelectionList.render(),a.updateDeleteIdpFromPreviousSelectionClickListeners(),a.indexElements(),a.focusOnIdpByIndex(a.indexOfIdpUnderFocus)}},a.prototype.updateDeleteIdpFromPreviousSelectionClickListeners=function(){for(var a=this.targetElement.querySelectorAll(".result .deleteable.action"),b=0;b<a.length;b++)a[b].removeEventListener("click",this.deleteIdpFromPreviousSelectionClickHandler()),a[b].addEventListener("click",this.deleteIdpFromPreviousSelectionClickHandler())},a.prototype.deleteIdpFromPreviousSelectionClickHandler=function(){var a=this;return function(b){b.preventDefault();var c=b.currentTarget.parentNode.getAttribute("data-idp-list-index");a.deleteIdpFromPreviousSelection(c)}},a.prototype.deleteIdpFromPreviousSelection=function(a){var b=this.previousSelectionList.getFilteredIdpByIndex(a);this.previousSelectionList.removeIdpByIndex(a),this.idpList.addIdp(b),this.updateDeleteIdpFromPreviousSelectionClickListeners(),this.indexElements(),this.focusOnFirstIdp(),this.previousSelectionStorage.save(this.previousSelectionList.getPreviousSelections())},a.prototype.selectIdpUnderFocus=function(){var a=this.targetElement.querySelector(".result.focussed");if(null!==a){var b=a.getAttribute("data-idp-list-index"),c=void 0;c=this.previousSelectionList.hasElement(a)?this.previousSelectionList.getFilteredIdpByIndex(b):this.idpList.getFilteredIdpByIndex(b-this.previousSelectionList.getLengthOfFilteredList()),this.previousSelectionStorage.save(this.previousSelectionList.getListUpdatedWith(c)),this.searchForm.elements["form-idp"].value=c.entityId,this.searchForm.submit()}},a}()},{}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=(c.KeyboardListener=function(){function a(b,c,e){d(this,a),this.idpPicker=b,this.searchBarElement=c,this.requestAccessModalHelper=e}return a.prototype.handle=function(a){if(a===f)return void this.requestAccessModalHelper.closeRequestAccessModal();if(a===h)return document.activeElement===this.searchBarElement?void this.searchBarElement.blur():void this.idpPicker.focusOnNextIdp();if(a===g){if(document.activeElement===this.searchBarElement)return;return this.idpPicker.isFocusOnFirstIdp()?void this.searchBarElement.focus():void this.idpPicker.focusOnPreviousIdp()}a===e&&this.idpPicker.selectIdpUnderFocus()},a}(),13),f=27,g=38,h=40},{}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0,c.PreviousSelectionList=void 0;var e=a("./IdpFilter");c.PreviousSelectionList=function(){function a(b,c,e){d(this,a),this.targetElement=b,this.previousSelectionList=c,this.idpListElementFactory=e,this.filteredPreviousSelectionList=this.previousSelectionList,this.editing=!1,this.render()}return a.prototype.getLengthOfFilteredList=function(){return this.filteredPreviousSelectionList.length},a.prototype.hasElement=function(a){return this.targetElement.querySelector(".idp-list")===a.parentNode},a.prototype.filterBy=function(a){this.filteredPreviousSelectionList=e.IdpFilter.filterIdpsByValue(this.previousSelectionList,a),this.render()},a.prototype.narrowFilterBy=function(a){this.filteredPreviousSelectionList=e.IdpFilter.filterIdpsByValue(this.filteredPreviousSelectionList,a),this.render()},a.prototype.getFilteredIdpByIndex=function(a){return this.filteredPreviousSelectionList[a]},a.prototype.getPreviousSelections=function(){return this.previousSelectionList},a.prototype.getListUpdatedWith=function(a){var b=this.previousSelectionList.slice(0),c=b.indexOf(a);if(-1===c)a.count=1,b.push(a);else{var d=b[c];d.count++,b[c]=d}return b.sort(function(a,b){return b.count-a.count})},a.prototype.removeIdpByIndex=function(a){this.previousSelectionList.splice(a,1),this.filteredPreviousSelectionList=this.previousSelectionList,this.render()},a.prototype.render=function(){this.filteredPreviousSelectionList.length>0?this.targetElement.className=this.targetElement.className.replace(" hidden",""):-1===this.targetElement.className.indexOf("hidden")&&(this.targetElement.className+=" hidden");var a=void 0;a=!0===this.editing?this.idpListElementFactory.createIdpListElementWithDeleteButtons(this.filteredPreviousSelectionList):this.idpListElementFactory.createIdpListElementWithSelectionButtons(this.filteredPreviousSelectionList),this.targetElement.replaceChild(a,this.targetElement.querySelector(".idp-list"))},a}()},{"./IdpFilter":3}],9:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0,c.PreviousSelectionStorage=void 0;var f=a("js-cookie"),g=d(f);c.PreviousSelectionStorage=function(){function a(b){e(this,a),this.cookieName=b}return a.prototype.save=function(a){var b=a.map(function(a){return{idp:a.entityId,count:a.count}});g.set(this.cookieName,b,{expires:365,path:"/"})},a}()},{"js-cookie":11}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&200==c.status&&b(c.responseText)},c.open("GET",a,!0),c.send(null)}function f(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&200===d.status&&c(d.responseText)},d.open("POST",a,!0),d.setRequestHeader("Content-type","application/json"),d.send(JSON.stringify(b))}c.__esModule=!0;c.RequestAccessModalHelper=function(){function a(b,c,e,f){d(this,a),this.requestAccessElement=b,this.scrollerElement=c,this.searchBarElement=e,this.requestAccessUrl=f}return a.prototype.openRequestAccessModal=function(){var a=this;e(this.requestAccessUrl,function(b){return a.renderRequestAccessModal(b)})},a.prototype.renderRequestAccessModal=function(a){document.body.style.overflowY="auto",this.requestAccessElement.innerHTML=a,this.scrollerElement.style.display="block";var b=this.scrollerElement.querySelector("#request-access-container"),c=this.requestAccessElement.querySelector(".close-modal"),d=this.requestAccessElement.querySelector("#request_access_submit"),e=this.requestAccessElement.querySelector("#name");b.removeEventListener("click",this.containerClickHandler()),b.addEventListener("click",this.containerClickHandler(b)),null!==d&&(d.removeEventListener("click",this.submitRequestAccessClickHandler()),d.addEventListener("click",this.submitRequestAccessClickHandler())),null!==c&&(c.removeEventListener("click",this.closeModalClickHandler()),c.addEventListener("click",this.closeModalClickHandler())),e.focus()},a.prototype.containerClickHandler=function(a){var b=this;return function(){event.target===a&&b.closeRequestAccessModal()}},a.prototype.submitRequestAccessClickHandler=function(){var a=this;return function(b){b.preventDefault();var c=a.requestAccessElement.querySelector("#request_access_form");f("/authentication/idp/performRequestAccess",{name:c.name.value,email:c.email.value,institution:c.institution.value,comment:c.comment.value},function(b){a.renderRequestAccessModal(b)})}},a.prototype.closeModalClickHandler=function(){var a=this;return function(b){b.preventDefault(),a.closeRequestAccessModal()}},a.prototype.closeRequestAccessModal=function(){document.body.style.overflowY=null,this.scrollerElement.style.display="none",this.requestAccessElement.innerHTML="",this.searchBarElement.focus(),this.scrollerElement.querySelector("#request-access-container").removeEventListener("click",this.containerClickHandler())},a}()},{}],11:[function(a,b,c){!function(a){var d=!1;if("function"==typeof define&&define.amd&&(define(a),d=!0),"object"==typeof c&&(b.exports=a(),d=!0),!d){var e=window.Cookies,f=window.Cookies=a();f.noConflict=function(){return window.Cookies=e,f}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}f.expires=f.expires?f.expires.toUTCString():"";try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(q){}e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape);var i="";for(var j in f)f[j]&&(i+="; "+j,!0!==f[j]&&(i+="="+f[j]));return document.cookie=b+"="+e+i}b||(g={});for(var k=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,m=0;m<k.length;m++){var n=k[m].split("="),o=n.slice(1).join("=");'"'===o.charAt(0)&&(o=o.slice(1,-1));try{var p=n[0].replace(l,decodeURIComponent);if(o=c.read?c.read(o,p):c(o,p)||o.replace(l,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(q){}if(b===p){g=o;break}b||(g[p]=o)}catch(q){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})})},{}]},{},[1]);